{% extends 'airs/base.html' %}
{% load rn_datetime %}

{% block title %}{{ air }} - R.N.{% endblock title %}

{% block header %}
{% endblock header %}

{% block content %}

{% with adt=air.started|init_rn_datetime:air.ended %}
<header class="rn-padding">
  <h2 class="uk-text-default uk-margin-small-bottom">
    <span class="uk-text-lead">{{ air.started|rn_weekday }}</span> <span class="">{{ air.started|rn_md }}</span> <span class="">{{ adt.hm }}</span> <span class="">{{ adt.airtime }}<small>min</small></span><br><span href="">{{ air.broadcaster.name }}</span>
  </h2>
  <h1 class="uk-text-lead uk-margin-remove-top uk-margin-small-bottom">{{ air.name }}</h1>

  <div class="uk-flex uk-flex-middle">
    <span uk-icon="icon: info" class="uk-icon"></span>
    <span class="uk-text-middle mgl-s"><a href="#">放送局</a></span>
    <span class="uk-text-middle uk-margin-small-left"><a href="#">番組</a></span>
  </div>
  <div class="uk-flex uk-flex-middle">
    <span uk-icon="icon: link" class="uk-icon"></span>
    <span class="uk-text-middle mgl-s"><a href="#">ラジコ</a></span>
    <span class="uk-text-middle uk-margin-small-left"><a href="#">URLコピー</a></span>
    <span class="uk-text-middle uk-margin-small-left"><a href="#">ラジコ+1w</a></span>
  </div>
</header>
{% endwith %}

{% include 'base/separator.html' %}

<div class="rn-padding">

  <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom">何卒！</button>

  {% comment %} リスナー数 {% endcomment %}
  {% include 'base/sum_reaction.html' with nanitozo_list=nanitozo_list icon='icon: user' is_negative=False %}
  {% comment %} 満足数 {% endcomment %}
  {% include 'base/sum_reaction.html' with nanitozo_list=good_nanitozo_list icon='icon: happy' is_negative=False %}
  {% comment %} 推し数 {% endcomment %}
  {% include 'base/sum_reaction.html' with nanitozo_list=comment_recommend_nanitozo_list icon='icon: star' is_negative=False %}
  {% comment %} コメント数 {% endcomment %}
  {% include 'base/sum_reaction.html' with nanitozo_list=comment_open_nanitozo_list icon='icon: comment' is_negative=False %}
  {% comment %} ネガ {% endcomment %}
  {% include 'base/sum_reaction.html' with nanitozo_list=comment_negative_nanitozo_list icon='icon: paint-bucket' is_negative=True %}
</div>

{% include 'base/separator.html' %}

<div class="rn-padding">
  <h3 class="uk-text-default uk-margin-small-bottom">事前告知<small> ネタバレなし（のはず）</small></h3>
  <div class="uk-inline">
    <p class="uk-text-small uk-margin-remove uk-text-break">{{ air.overview_before|linebreaksbr }}</p>
    <div onclick="this.remove()" class="uk-overlay-primary uk-background-secondary uk-position-cover">
      <div class="uk-position-center uk-text-small">Tap!</div>
    </div>
  </div>
</div>

{% include 'base/separator.html' %}

<div class="rn-padding">
  <h3 class="uk-text-default uk-margin-small-bottom">番組内容<small> ネタバレあり</small></h3>
  <div class="uk-inline">
    <p class="uk-text-small uk-margin-remove uk-text-break">{{ air.overview_after|linebreaksbr }}</p>
    <div onclick="this.remove()" class="uk-overlay-primary uk-background-secondary uk-position-cover">
      <div class="uk-position-center uk-text-small">Tap!</div>
    </div>
  </div>
</div>

{% include 'base/separator.html' %}

{% include 'list/item_reaction.html' with title='推し' nanitozo_list=comment_recommend_nanitozo_list %}

{% include 'base/separator.html' %}

{% include 'list/item_reaction.html' with title='感想' nanitozo_list=comment_open_nanitozo_list %}

{% include 'base/separator.html' %}

{% include 'list/item_reaction.html' with title='ネガ' nanitozo_list=comment_negative_nanitozo_list %}

{% include 'base/separator.html' %}


<br><br><br><br><br><br><br><br><br><br>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form action="{% url 'airs:vote' air.id %}" method="post">{% csrf_token %}
  {% for nanitozo in air.nanitozo_set.all %}
  <input type="radio" name="nanitozo" id="nanitozo{{ forloop.counter }}" value="{{ nanitozo.id }}">
  <label for="nanitozo{{ forloop.counter }}" class="uk-text-break">{{ nanitozo.comment }}</label><br>
  {% endfor %}
  <input type="submit" value="Vote" class="uk-button uk-button-default">
</form>

{% endblock content %}